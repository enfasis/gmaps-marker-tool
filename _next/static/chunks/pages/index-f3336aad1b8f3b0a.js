(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5077:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return ue}});var n=r(7054),o=r(7294),l=r(9008),i=r(5893);function a(e){var t=e.title,r=void 0===t?"":t,n=e.icoPath,o=void 0===n?"/images/favicon.icon":n;return(0,i.jsxs)(l.default,{children:[(0,i.jsx)("title",{children:r}),(0,i.jsx)("link",{rel:"shortcut icon",href:o})]})}var s=r(4654),c=r.n(s),u=r(4753),f=r.n(u),d=r(2762),p=r.n(d),g={lat:-12.04318,lng:-77.02824},m=function(e,t){return e&&t?function(e,t){var r=256,n=256;function o(e){var t=Math.sin(e*Math.PI/180),r=Math.log((1+t)/(1-t))/2;return Math.max(Math.min(r,Math.PI),-Math.PI)/2}function l(e,t,r){return Math.floor(Math.log(e/t/r)/Math.LN2)}var i=(o(e.nlat)-o(e.slat))/Math.PI,a=e.elng-e.wlng,s=(a<0?a+360:a)/360,c=l(t.height,r,i),u=l(t.width,n,s);return Math.min(c,u,21)}(e,t):11},h=function(e,t){var r=function(e){var t=c()(e,(function(e){return e.address.location}));return t&&0!==t.length?{nlat:f()(t,(function(e){return e.lat})).lat,slat:p()(t,(function(e){return e.lat})).lat,elng:f()(t,(function(e){return e.lng})).lng,wlng:p()(t,(function(e){return e.lng})).lng}:null}(e),n=function(e){return e?{lat:(e.nlat+e.slat)/2,lng:(e.elng+e.wlng)/2}:g}(r),o=m(r,t);return{zoom:o>17?17:o,center:n}},y=[{featureType:"water",elementType:"geometry",stylers:[{color:"#e9e9e9"},{lightness:17}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#f3f4f6"},{lightness:20}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ffffff"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#ffffff"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:16}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#f5f5f5"},{lightness:21}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#dedede"},{lightness:21}]},{elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#ffffff"},{lightness:16}]},{elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#333333"},{lightness:40}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#f2f2f2"},{lightness:19}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#fefefe"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#fefefe"},{lightness:17},{weight:1.2}]}];function v(e){var t=e.onLoadMap,r=void 0===t?function(){}:t,l=e.children,a=(0,o.useRef)(),s=(0,n.Db)({googleMapsApiKey:"AIzaSyDTplpniIUzmUNeCq1znVV4wURAnbAPS14"}).isLoaded,c=(0,o.useCallback)((function(e){r(e)}),[]),u=(0,o.useCallback)((function(){r(null)}),[]);return s?(0,i.jsx)("div",{className:"w-full h-full",ref:a,children:(0,i.jsx)(n.b6,{mapContainerClassName:"h-full",options:{styles:y,disableDefaultUI:!0},center:g,zoom:12,onLoad:c,onUnmount:u,children:l})}):(0,i.jsx)("div",{children:"No se pudo cargar el mapa"})}var b=(0,o.memo)(v),x=r(2809),w=r(1243),j=r(5523),O=r(3105),P=r.n(O),k=r(7480),N=r(2283),T=r(155),C=r(1164),S=r(1163),D=["primary","secondary","danger","special","small","disabled","active","onClick","href","size","className","children","type"];function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){(0,x.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _=function(e){var t=e.primary,r=e.secondary,n=e.danger,o=e.special,l=e.small,a=e.disabled,s=e.active,c=e.onClick,u=void 0===c?function(){}:c,f=e.href,d=e.size,p=void 0===d?"xs":d,g=e.className,m=void 0===g?"":g,h=e.children,y=e.type,v=void 0===y?"button":y,b=(0,C.Z)(e,D),x=(0,S.useRouter)(),w="transform transition-transform rounded-xl focus:outline-none  inline-block ";w+=l?"p-2 ":"p-3 ";var j="w-full h-full font-bold tracking-wide text-center ",O=function(e,t,r,n){if(t)return"cursor-default nm-inset-"+r+"-"+p+" ";var o="nm-"+n+"-"+r+"-"+p+" ";return e?o:o+"active:nm-inset-"+r+"-"+p+" focus:scale-105 "};return o?(w+=O(a,s,"white","flat"),t&&(j+="text-gradient bg-gradient-to-r from-blue-400 to-blue-700 "),r&&(j+="text-gradient bg-gradient-to-r from-gray-400 to-gray-700 "),n&&(j+="text-gradient bg-gradient-to-r from-red-300 to-red-600 ")):(t&&(w+=O(a,s,"blue","convex"),j+="text-gradient bg-gradient-to-r from-white via-gray-100 to-white "),r&&(w+=O(a,s,"gray","convex"),j+="text-gradient bg-gradient-to-r from-white to-gray-100 "),n&&(w+=O(a,s,"red","convex"),j+="text-gradient bg-gradient-to-r from-white  to-red-100 ")),a?w+="opacity-70 cursor-not-allowed ":s||(w+="active:scale-95  hover:scale-105 "),w+=m,(0,i.jsx)("button",M(M({className:w,type:v,onClick:function(e){!a&&f&&x.push(f),a?e.preventDefault():u(),e.stopPropagation()}},b),{},{children:(0,i.jsx)("div",{className:j,children:h})}))},I=r(3279),L=r.n(I),A=function(e){var t=e.secondary,r=e.location,o=e.isHover,l=e.onRightClick,a=e.info,s="transform flex items-center justify-center overflow-visible cursor-pointer ",c="relative h-5 w-5 rounded-full ",u="absolute h-6 w-6 rounded-full animate-ping delay-75 ";return o?(u+="bg-pink-200 ",c+="bg-pink-500 "):t?(u+="bg-green-200 ",c+="bg-green-500 "):(u+="bg-blue-200 ",c+="bg-blue-500 "),s+=o?"z-30 scale-125 ":"z-0 ",(0,i.jsx)(i.Fragment,{children:r&&(0,i.jsx)(n.xT,{position:r,mapPaneName:n.xT.OVERLAY_MOUSE_TARGET,getPixelPositionOffset:function(e,t){return{x:e-30,y:t-30}},children:(0,i.jsxs)("div",{className:s,onContextMenu:l,title:a,children:[(0,i.jsx)("div",{className:u}),(0,i.jsx)("div",{className:c}),(0,i.jsx)(T.rhv,{className:"absolute h-4 w-4 text-white stroke-2"})]})})})},Z=r(266),z=r(809),R=r.n(z);function U(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"===typeof e)return V(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return V(e,t)}(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,i=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){a=!0,l=e},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw l}}}}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var X=function(e){var t,r=U(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(n.types.includes("locality"))return n.short_name}}catch(o){r.e(o)}finally{r.f()}return""},B=function(e){var t=e.address_components,r=e.formatted_address,n=e.geometry.location;return{api:r,district:X(t),location:{lat:n.lat(),lng:n.lng()}}},F=null,H=function(){var e=(0,Z.Z)(R().mark((function e(t){var r;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===(r=google?F||(F=new google.maps.Geocoder):null)||void 0===r?void 0:r.geocode(t).then((function(e){var t=e.results;return t&&t.length>0?B(t[0]):null})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=r(1469),q=r.n($),G=r(2628),W=r.n(G);function K(){return(0,o.useContext)(n.X$)}function Y(e,t){var r=document.querySelector("#mapView");if(e&&r){var n=q()(t)?t:W()(t),o=r.offsetWidth,l=document.body.offsetWidth,i=h(n,{width:o,height:document.body.offsetHeight}),a=i.zoom,s=i.center;e.setZoom(a),e.setCenter(s),e.panBy(-.5*(l-o),l<768?-200:0)}}function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J(Object(r),!0).forEach((function(t){(0,x.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ee=function(e){var t=e.control,r=e.name,n=e.label,l=e.rules,a=e.placeholder,s=void 0===a?"Escriba la direcci\xf3n":a,c=(0,o.createRef)(),u=(0,N.bc)({control:t,name:r,rules:l,onFocus:function(){var e;null===(e=c.current)||void 0===e||e.focus()}}).field,f=u.onChange,d=u.onBlur,p=u.value,g=(0,o.useState)(""),m=g[0],h=g[1],y=(0,o.useState)(!1),v=y[0],b=y[1],x=(0,o.useState)(null),w=x[0],j=x[1],O=(0,o.useCallback)(L()(j,500),[]);(0,o.useEffect)((function(){w&&w.length>10&&(b(!0),H({address:w+" Lima, Peru"}).then((function(e){e?(f(Q({user:w},e)),h("")):h("No encontrado")})).finally((function(){return b(!1)})))}),[w]);var P=K();(0,o.useEffect)((function(){return P&&google.maps.event.addListener(P,"click",(function(e){var t={lat:e.latLng.lat(),lng:e.latLng.lng()};b(!0),H({location:t}).then((function(e){var t;e?(f(Q({user:null===c||void 0===c||null===(t=c.current)||void 0===t?void 0:t.value},e)),h("")):h("No Encontrado")})).finally((function(){return b(!1)}))})),function(){P&&google.maps.event.clearListeners(P,"click")}}),[P]);var k=null!==p&&void 0!==p&&p.user?null===p||void 0===p?void 0:p.user:null===p||void 0===p?void 0:p.api,C=v?"animate-pulse":"";return(0,i.jsxs)("div",{children:[(0,i.jsx)(le,{containerClass:C,Icon:T.D49,label:n,placeholder:s,onChange:function(e){O(e.target.value),h("")},onBlur:d,error:m,ref:c}),P&&(null===p||void 0===p?void 0:p.location)&&(0,i.jsx)(A,{location:p.location,info:k})]})},te=["Icon","label","error","containerClass"];function re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?re(Object(r),!0).forEach((function(t){(0,x.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function oe(e,t){var r=e.Icon,n=e.label,o=e.error,l=e.containerClass,a=void 0===l?"":l,s=(0,C.Z)(e,te),c="transition-all p-2 pl-0 w-full focus:outline-none no-autofill-bkg ";c+="tracking-wide font-bold ",c+="border-b ",c+="bg-transparent ",c+=o?"border-red-300 text-red-300 ":"border-gray-300 text-gray-600 ";c+="hover:nm-flat-white-xs hover:pl-2 hover:rounded-lg ",c+="focus:nm-flat-white-xs focus:pl-4 focus:rounded-xl ",c+="placeholder-gray-400 placeholder-light ";return"lg:flex lg:ml-4 lg:static lg:text-sm ","absolute ml-10 -top-3 text-xs ",(0,i.jsxs)("div",{className:"pb-6 mt-3 flex flex-row items-center relative w-full"+a,children:[r&&(0,i.jsx)(r,{className:"h-8 w-8 text-center p-1 text-gray-400 nm-flat-white-xs rounded-2xl"}),n&&(0,i.jsxs)("label",{className:"tracking-wide whitespace-nowrap text-gradient bg-gradient-to-r from-gray-400 to-gray-500 lg:flex lg:ml-4 lg:static lg:text-sm absolute ml-10 -top-3 text-xs ",children:[n,":"]}),(0,i.jsxs)("div",{className:"flex flex-col w-full ml-4 relative",children:[(0,i.jsx)("input",ne(ne({className:c},s),{},{ref:t})),o?(0,i.jsx)("div",{className:"absolute -bottom-4 text-xs text-red-300 whitespace-nowrap truncate w-full ",children:o}):null]})]})}var le=(0,o.forwardRef)(oe);function ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(r),!0).forEach((function(t){(0,x.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var se=function(e){var t,r=e.data,n=e.onRightClick,l=(0,o.useState)(!1),a=l[0],s=l[1],c=null!==r&&void 0!==r&&null!==(t=r.address)&&void 0!==t&&t.user?r.address.user:r.address.api;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"p-4 nm-flat-white-xs hover:nm-convex-white-xs rounded-xl cursor-pointer my-2 min-w-0 truncate w-sm capitalize",onMouseEnter:function(){return s(!0)},onMouseLeave:function(){return s(!1)},onContextMenu:n,children:c}),(0,i.jsx)(A,{secondary:!0,location:r.address.location,isHover:a,info:c,onRightClick:n})]})};var ce=function(e){(0,j.Z)(e);var t=(0,o.useState)([]),r=t[0],n=t[1],l=(0,N.cI)({mode:"onSubmit"}),a=l.handleSubmit,s=l.control,c=l.watch,u=l.reset,f=K(),d=c("address");return(0,o.useEffect)((function(){(null===r||void 0===r?void 0:r.length)>0&&Y(f,d?[].concat((0,w.Z)(r),[{address:d}]):(0,w.Z)(r))}),[f,r,d]),(0,i.jsxs)("form",{onSubmit:a((function(e){e.id=(0,k.x0)(20),e.address&&n((function(t){return[].concat((0,w.Z)(t),[ae({},e)])})),u()})),children:[(0,i.jsxs)("div",{className:"flex px-4 py-2 nm-flat-white-xs rounded-xl mt-2 mb-4",children:[(0,i.jsx)(ee,{control:s,label:"Direcci\xf3n",name:"address"}),(0,i.jsx)(_,{primary:!0,special:!0,type:"submit",className:"self-start mt-2 ml-2 min-w-max",children:(0,i.jsx)(T.xcL,{className:"w-5 h-5 inline-block text-blue-400"})})]}),r.map((function(e){return(0,i.jsx)(se,{data:e,onRightClick:function(t){t.preventDefault(),n((function(t){return P()(t,(function(t){return t.id!=e.id}))}))}},e.id)}))]})};var ue=function(){var e=(0,o.useState)(null),t=e[0],r=e[1],l=(0,o.useCallback)((function(e){r(e)}),[]);return(0,i.jsxs)("div",{className:"overflow-hidden",children:[(0,i.jsx)("div",{className:"h-screen w-screen absolute inset-0 ",children:(0,i.jsx)(b,{onLoadMap:l})}),(0,i.jsx)(n.X$.Provider,{value:t,children:(0,i.jsxs)("div",{className:"relative flex flex-grow flex-col md:flex-row self-start md:p-6",children:[(0,i.jsx)("div",{children:(0,i.jsx)(ce,{})}),(0,i.jsx)("div",{id:"mapView",className:"m-2 h-96 md:h-auto md:m-6 flex-grow"})]})}),(0,i.jsx)(a,{title:"Inicio"})]})}},8581:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(5077)}])}},function(e){e.O(0,[260,255,900,774,888,179],(function(){return t=8581,e(e.s=t);var t}));var t=e.O();_N_E=t}]);